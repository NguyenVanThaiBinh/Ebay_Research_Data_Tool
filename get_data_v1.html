<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test File</title>
</head>

<body>
    <h1 id="answer"></h1>
    <script>
        $('.vip').each(function() {
            var item = $(this).text();
            // var item = "Mack 10 - Mack 10 '95 2xLP US ORG!! Ice Cube WC K-Dee"
            var regex_1 = item.replace(/[^a-zA-Z ]/g, "")
            var tesst = regex_1.replace(/ +(?= )/g, '');

            var count = 0;
            let char_index = 0;
            //get just 4 word
            for (var i = 0; i < tesst.length; i++) {
                if (tesst.charAt(i) == ' ') {
                    count++;
                }
                if (count == 4) {
                    char_index = i;
                }
            }
            //alert("can't not find!!!")
            if (count <= 3) {
                tesst = ''
            }
            if (tesst.includes("xLP")) {
                tesst = tesst.replace('xLP', '')
            }
            if (tesst.includes("LP")) {
                tesst = tesst.replace('LP', '')
            }
            //check country
            if (tesst.includes("US")) {
                tesst = tesst.substring(0, char_index + 2);
                tesst = tesst.replace('US', '')
                tesst = tesst + " US"
            }
            if (tesst.includes("UK")) {
                tesst = tesst.substring(0, char_index + 2);
                tesst = tesst.replace("UK", '')
                tesst = tesst + " UK"
            }
            if (tesst.includes("JAPAN")) {
                tesst = tesst.substring(0, char_index + 2);
                tesst = tesst.replace('JAPAN', '')
                tesst = tesst + " JAPAN"
            }
            if (tesst.includes("EU")) {
                tesst = tesst.substring(0, char_index + 2);
                tesst = tesst.replace('EU', '')
                tesst = tesst + " EU"
            }
            if (tesst.includes("ITALY")) {
                tesst = tesst.substring(0, char_index + 2);
                tesst = tesst.replace('ITALY', '')
                tesst = tesst + " ITALY"
            }

            //handling string second time
            tesst = tesst.replace(/ +(?= )/g, '');
            tesst = tesst.replace("ORG", '');



            // change ' ' by '+'
            tesst = tesst.replace('  ', ' ')
            for (var i = 0; i < tesst.length; i++) {
                if (tesst.charAt(0) == ' ') {
                    tesst = tesst.replace(' ', '');
                }
                if (tesst.charAt(i) == ' ') {
                    tesst = tesst.replace(' ', '+');
                }
            }
            //Replace optional
            //   tesst = tesst.replace('+O', '')
            tesst = tesst.replace('+OR', '')
            tesst = tesst.replace('+Or', '')
                //  tesst = tesst.replace('+G', '')
                //   tesst = tesst.replace('+J', '')
            console.log(tesst)
                // document.getElementById("answer").innerHTML = "The answer: " + tesst;
        })
    </script>
</body>

</html>